{
  "success": true,
  "result": {
    "content": [
      {
        "type": "text",
        "text": "{\"data\":{\"type\":\"tool\",\"id\":\"get_workspace_details\",\"attributes\":{\"readme\":\"# Cluster Bootstrap Terraform Module\\n\\nThis Terraform module bootstraps the core infrastructure components for the fzymgc-house Kubernetes cluster.\\n\\n## Components\\n\\nThe module installs and configures the following components in order:\\n\\n1. **Prometheus Operator CRDs** - Custom Resource Definitions for Prometheus monitoring\\n2. **cert-manager** - Automated certificate management\\n3. **External Secrets Operator** - Syncs secrets from HashiCorp Vault to Kubernetes\\n4. **Longhorn** - Distributed block storage with encryption\\n5. **MetalLB** - Load balancer for bare metal Kubernetes\\n6. **ArgoCD** - GitOps continuous delivery\\n\\n## Prerequisites\\n\\n- Kubernetes cluster running (deployed via Ansible)\\n- `kubectl` configured with `fzymgc-house-admin.yml` kubeconfig\\n- HashiCorp Vault accessible at `https://vault.fzymgc.house`\\n- Valid `VAULT_TOKEN` with `infrastructure-developer` policy\\n- Terraform Cloud workspace configured with tags `main-cluster` and `bootstrap`\\n\\n## Secrets Required in Vault\\n\\nThe following secrets must exist in Vault before running this module:\\n\\n### Infrastructure PKI\\n- `fzymgc-house/infrastructure/pki/fzymgc-ica1-ca`\\n  - `cert` - ICA1 certificate\\n  - `cleartext_key` - ICA1 private key\\n  - `fullchain` - Full certificate chain\\n\\n### Longhorn\\n- `fzymgc-house/cluster/longhorn/crypto-key`\\n  - `password` - Encryption key for volumes\\n- `fzymgc-house/cluster/longhorn/cloudflare-r2`\\n  - `username` - R2 access key ID\\n  - `password` - R2 secret access key\\n\\n### ArgoCD\\n- `fzymgc-house/cluster/argocd`\\n  - `authentik_client_id` - Authentik OIDC client ID\\n  - `authentik_client_secret` - Authentik OIDC client secret\\n  - `github_app_private_key` - GitHub App private key (base64 encoded)\\n  - `admin.password` - ArgoCD admin password\\n  - `admin.password_mtime` - Password modification time\\n  - `server.secretkey` - ArgoCD server secret key\\n  - `webhook.github.secret` - GitHub webhook secret\\n\\n## Usage\\n\\n```bash\\n# Navigate to module directory\\ncd tf/cluster-bootstrap\\n\\n# Initialize Terraform\\nterraform init\\n\\n# Review planned changes\\nterraform plan\\n\\n# Apply configuration\\nterraform apply\\n\\n# View outputs\\nterraform output\\n```\\n\\n## Workflow\\n\\n1. **Deploy Kubernetes cluster** using Ansible playbook:\\n   ```bash\\n   ansible-playbook -i ansible/inventory/hosts.yml ansible/k3s-playbook.yml\\n   ```\\n\\n2. **Bootstrap cluster components** using this Terraform module:\\n   ```bash\\n   cd tf/cluster-bootstrap\\n   terraform init\\n   terraform apply\\n   ```\\n\\n3. **GitOps takes over** - ArgoCD automatically deploys applications from the `argocd/cluster-app` directory\\n\\n## Module Structure\\n\\n```\\ntf/cluster-bootstrap/\\n\u251c\u2500\u2500 README.md                  # This file\\n\u251c\u2500\u2500 versions.tf                # Provider version constraints\\n\u251c\u2500\u2500 terraform.tf               # Terraform Cloud backend configuration\\n\u251c\u2500\u2500 variables.tf               # Input variables\\n\u251c\u2500\u2500 outputs.tf                 # Output values\\n\u251c\u2500\u2500 prometheus-crds.tf         # Prometheus Operator CRDs\\n\u251c\u2500\u2500 cert-manager.tf            # cert-manager installation\\n\u251c\u2500\u2500 external-secrets.tf        # External Secrets Operator\\n\u251c\u2500\u2500 longhorn.tf                # Longhorn storage\\n\u251c\u2500\u2500 metallb.tf                 # MetalLB load balancer\\n\u251c\u2500\u2500 argocd.tf                  # ArgoCD GitOps\\n\u2514\u2500\u2500 manifests/\\n    \u2514\u2500\u2500 fzymgc-house-issuer.yaml  # ClusterIssuer manifest\\n```\\n\\n## Dependency Graph\\n\\n```\\nPrometheus CRDs\\n    \u2193\\ncert-manager \u2192 External Secrets \u2192 Longhorn \u2192 MetalLB\\n    \u2193              \u2193                              \u2193\\n    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2192 ArgoCD\\n```\\n\\n## Outputs\\n\\n- `argocd_namespace` - ArgoCD namespace name\\n- `longhorn_namespace` - Longhorn namespace name\\n- `cert_manager_namespace` - cert-manager namespace name\\n- `external_secrets_namespace` - External Secrets namespace name\\n- `metallb_namespace` - MetalLB namespace name\\n\\n## Notes\\n\\n- This module uses Terraform Cloud for remote state storage\\n- All secrets are fetched from HashiCorp Vault, not stored in Terraform state\\n- The module is idempotent and can be safely re-run\\n- Helm v4 compatible (uses the Helm Terraform provider)\\n- Dependencies are explicitly defined to ensure correct installation order\",\"success\":true,\"workspace\":{\"actions\":{\"is-destroyable\":true},\"allow-destroy-plan\":true,\"apply-duration-average\":0,\"assessments-enabled\":false,\"auto-apply\":false,\"auto-apply-run-trigger\":false,\"can-queue-destroy-plan\":false,\"created-at\":\"2025-12-06T00:49:41Z\",\"description\":\"\",\"environment\":\"default\",\"execution-mode\":\"local\",\"file-triggers-enabled\":true,\"global-remote-state\":false,\"hyok-enabled\":null,\"inherits-project-auto-destroy\":true,\"locked\":false,\"migration-environment\":\"\",\"name\":\"main-cluster-bootstrap\",\"no-code-upgrade-available\":false,\"operations\":false,\"permissions\":{\"can-destroy\":true,\"can-force-delete\":true,\"can-force-unlock\":true,\"can-lock\":true,\"can-manage-hyok\":false,\"can-manage-run-tasks\":true,\"can-queue-apply\":false,\"can-queue-destroy\":false,\"can-queue-run\":false,\"can-read-settings\":true,\"can-unlock\":true,\"can-update\":true,\"can-update-variable\":false},\"plan-duration-average\":0,\"policy-check-failures\":0,\"queue-all-runs\":true,\"resource-count\":36,\"run-failures\":2,\"setting-overwrites\":{\"agent-pool\":true,\"execution-mode\":true},\"source\":\"terraform\",\"source-name\":\"\",\"source-url\":\"\",\"speculative-enabled\":true,\"structured-run-output-enabled\":true,\"tag-names\":[\"main-cluster\",\"bootstrap\"],\"terraform-version\":\"~\\u003e 1.14.0\",\"trigger-patterns\":[],\"trigger-prefixes\":[],\"updated-at\":\"2025-12-30T16:53:31Z\",\"vcs-repo\":{\"branch\":\"main\",\"display-identifier\":\"fzymgc-house/selfhosted-cluster\",\"github-app-installation-id\":\"\",\"identifier\":\"fzymgc-house/selfhosted-cluster\",\"ingress-submodules\":false,\"oauth-token-id\":\"ot-AAg3TQQWwH2zmmQM\",\"repository-http-url\":\"https://github.com/fzymgc-house/selfhosted-cluster\",\"service-provider\":\"github\",\"source-directory\":\"\",\"tag-prefix\":\"\",\"tags\":false,\"tags-regex\":\"\",\"webhook-url\":\"https://app.terraform.io/webhooks/vcs/d3b3a7f3-74af-4a9e-ac4c-d6f2a07eea5a\"},\"working-directory\":\"tf/cluster-bootstrap\",\"workspace-kpis-runs-count\":2}}}}\n"
      }
    ]
  }
}